<!-- index.html (COM HISTÓRICO NA SIDEBAR - sem mudar nada do chat atual, apenas adicionando) -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <!-- Favicon -->
<link rel="icon" type="image/png" sizes="32x32" href="corvuslogo.png">
<link rel="icon" type="image/png" sizes="16x16" href="corvuslogo.png">
<link rel="apple-touch-icon" sizes="180x180" href="corvuslogo.png">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>CORVUS - Agente Oficial da MSY</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

<!-- ===== TELA DE LOGIN ===== -->
<div id="loginScreen" class="login-screen">
  <div class="login-bg">
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>
  </div>
  <div class="login-card">
    <div class="login-header">
      <img src="corvuslogo.png" alt="Corvus" class="login-logo-img" />
      <h1 class="login-title">CORVUS</h1>
      <span class="login-subtitle">Ordem Masayoshi</span>
    </div>
    <div id="loginError" class="login-error" style="display:none;"></div>
    <div class="login-form">
      <div class="login-field">
        <label>Email</label>
        <input type="email" id="loginEmail" placeholder="seu@email.com" autocomplete="email" />
      </div>
      <div class="login-field">
        <label>Senha</label>
        <input type="password" id="loginPassword" placeholder="••••••••" autocomplete="current-password" />
      </div>
      <button class="login-btn" id="loginBtn">Acessar</button>
      <button class="login-guest-btn" id="guestBtn">Entrar como convidado</button>
    </div>
  </div>
</div>
    <!-- Animated Background -->
    <div class="background-container">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Main Container -->
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <button class="menu-toggle" id="menuToggle" aria-label="Abrir menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="logo">
                    <img src="corvuslogo.png" alt="Corvus Logo" class="logo-icon" />
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    <div class="logo-text">
                        <h1>CORVUS</h1>
                        <span>Agente oficial da MSY</span>
                    </div>
                </div>
                <div class="header-status">
                    <div class="status-indicator"></div>
                    <span>Corvus v2.0</span>
                </div>
            </div>
            <div class="header-glow"></div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar Simplificada -->
            <aside class="sidebar" id="sidebar">
  <div class="sidebar-content">
    <!-- Info do usuário logado -->
    <div class="sidebar-user-info" id="sidebarUserInfo" style="display:none;">
      <div class="sui-avatar" id="suiAvatar">?</div>
      <div class="sui-details">
        <span class="sui-name" id="suiName">—</span>
        <span class="sui-cargo" id="suiCargo">—</span>
      </div>
      <button class="sui-logout" id="logoutBtn" title="Sair">↪</button>
    </div>
    <button class="btn-new-chat" id="newChatBtn">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 5v14M5 12h14"/>
      </svg>
      Novo Chat
    </button>

    <!-- HISTÓRICO NA SIDEBAR -->
    <div class="sidebar-history" aria-label="Histórico de conversas">
      <div class="sidebar-history-header">
        <span class="sidebar-history-title">Conversas</span>
        <button class="btn-clear-history" id="clearAllChatsBtn" type="button" title="Limpar todo o histórico">
          Limpar
        </button>
      </div>

      <!-- Itens injetados pelo JS -->
      <div class="sidebar-history-list" id="chatList"></div>
    </div>
    <!-- /HISTÓRICO -->

    <div class="sidebar-info">
  <div class="info-divider"></div>

  <div class="info-item info-institution">
    <span class="info-label">Desenvolvido pela</span>
    <span class="info-value">Ordem Masayoshi</span>
  </div>

  <div class="info-item info-credits">
    <span class="info-label">Arquitetura</span>
    <span class="info-value">T4 Masayoshi • Xitter</span>
  </div>
</div>

</aside>


            <!-- Overlay for mobile -->
            <div class="sidebar-overlay" id="sidebarOverlay"></div>

            <!-- Chat Area -->
            <main class="chat-container">
            <!-- Banner convidado (injetado por JS) -->
            <div id="guestBanner"></div>
            <div class="chat-messages" id="chatMessages">
                    <!-- Welcome + Suggestions injected by JS -->
                </div>

                <!-- Input Area -->
                <div class="input-container">
                    <div class="input-wrapper">
                        <textarea 
                            id="messageInput" 
                            placeholder="Faça sua pergunta ao Corvus..."
                            rows="1"
                        ></textarea>
                        <button id="fenrirToggle" class="btn-fenrir" title="Ativar modo Fenrir — Criatividade">
                            <span class="fenrir-icon">⚡</span>
                            <span class="fenrir-label">Fenrir</span>
                        </button>
                        <button id="sendBtn" class="btn-send" aria-label="Enviar mensagem">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="22" y1="2" x2="11" y2="13"/>
                                <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                            </svg>
                        </button>
                    </div>
                    <p class="input-hint"> © 2026 Masayoshi - Todos os direitos reservados. </p>
                </div>
            </main>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
